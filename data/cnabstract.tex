% !Mode:: "TeX:UTF-8"

%%% 中文摘要填写部分 %%%

\cabstract{

    % *******************************请注意在中文摘要修改确定后同步修改英文摘要！！！！！！*******************************
    % *******************************请注意在中文摘要修改确定后同步修改英文摘要！！！！！！*******************************
    % *******************************请注意在中文摘要修改确定后同步修改英文摘要！！！！！！*******************************
    % *******************************请注意在中文摘要修改确定后同步修改英文摘要！！！！！！*******************************
    % *******************************请注意在中文摘要修改确定后同步修改英文摘要！！！！！！*******************************
    % *******************************请注意在中文摘要修改确定后同步修改英文摘要！！！！！！*******************************

    在现代的高性能处理器设计领域中，分支预测部件 (Branch Prediction Unit, BPU)是一个处理器架构中必不可少的一部分，处理器为了追求更高的性能往往会往高频率，深流水线的方向设计，高频率就限制了每周期内逻辑的复杂度，而深流水线则会带来更高的分支预测错误惩罚。关于分支预测算法的研究有很多。例如 TAGE 预测器是目前公开设计的先进分支预测器之一。但是分支预测研究的论文大多基于模拟器实现，而真实的硬件设计过程中会有更多的约束和物理实现细节需要考虑。

    % \sout{this is a deleted content}

    本文在香山 RISC-V 开源高性能处理器第一版雁栖湖架构的基础上，设计了第二版南湖架构中的分支预测组件，南湖架构是在雁栖湖架构上整体进行重构升级的新架构。\textbf{由于分支预测中包含雁栖湖架构的多条关键路径，且在实际测试中发现前端的取指空泡在整体运行周期中占比较大。因此南湖架构的分支预测组件面临的主要挑战是如何保证原有分支预测准确率的前提下，减少取指空泡，并达到更高的频率。}新的分支预测旨在通过降低分支预测宽度来减少关键路径的延迟，以达到更高的频率，同时实现分支预测和取指单元的解耦以达到更高的性能。本文的主要研究内容有：

    (1) 通过改进 BTB (Branch Target Buffer)，将取指的基本单位由雁栖湖架构的 32 Bytes 对齐的定长指令块改为了以 Fetch Block 为单位的不定长指令块，以此来限制每次取指的最大分支指令数量，并将所有预测器也都修改为使用 Fetch Block 作为基本单元预测。

    (2) 通过添加一个 FTQ (Fetch Target Queue) 将分支预测与取指单元解耦，FTQ 用于保存取指请求和分支预测结果，控制分支预测恢复和更新。

    本文的主要创新点在于提出并实现了一种限制分支预测宽度的分支预测架构，以及一种适用于解耦前端的分支预测架构，能够为处理器带来频率和性能两个方面的提升。是目前RISC-V开源处理器研究领域的首个实现。

    在验证方面，使用 Verilator 进行行为级仿真，使用 checkpoint 技术运行 SPEC CPU 2006 的片段以评估整体架构性能，通过性能计数器来统计相关数据并进行分析。

    综上所述，本文研究了 RISC-V 高性能处理器的分支预测架构，以及物理实现过程中的具体问题，提出并完成了一种分支预测的具体实现。最终通过行为级仿真对其进行了评估，实验结果表明，相对于雁栖湖架构，在14nm的工艺下，南湖架构的频率能够提升11\%，运行部分SPEC CPU 2006测试程序IPC平均提升31\%。

}

\ckeywords{RISC-V;~~高性能处理器;~~CPU设计;~~解耦前端;~~分支预测}

\cnpageheader{基于RISC-V高性能处理器的分支预测部件研究}  %页眉标题无需断行

% 使用makecnabstract生成中文摘要
\makecnabstract